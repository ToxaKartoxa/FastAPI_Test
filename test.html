<!DOCTYPE html>
<html>
<body>

<form id="myForm">
<div style="text-align: center;">

	<label for="IP">Выберите IP для отправки:</label>
	<select id="IP" name="IP" multiple>
		<option value="http://127.0.0.1:8000/tasks/json">127.0.0.1</option>
		<option value="http://188.120.249.2:8000/tasks/json">188.120.249.2</option>
	</select>

	<input type="text" id="name" name="name" placeholder="Таска" value="Таска">
	<input type="text" id="description" name="description" placeholder="Дескриптор" value="Дескриптор">
	<button type="button" id="submitButton">Отправить таску на запись</button>
</div>
</form>

<script>
document.getElementById('submitButton').addEventListener('click', function() {
    const form = document.getElementById('myForm');
    const Data = {
        "name": document.getElementById('name').value,
        "description": document.getElementById('description').value
    };

    const json = JSON.stringify(Data);

    fetch(document.getElementById('IP').value, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: json
    })
    .then(response => {
        if (response.ok) {
            return response.json();
        }
        throw new Error('Ошибка при отправке данных');
    })
    .then(data => {
        console.log('Success:', data);
    })
    .catch(error => {
        console.error('Error:', error);
    });
});
</script>

</body>
</html>